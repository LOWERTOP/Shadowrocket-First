#!name=ç»¼åˆæœåŠ¡æ¨¡å—
#!desc=è‡ªç”¨æ¨¡å—
#!arguments=æ­Œè¯ç¿»è¯‘:false, ç¿»è¯‘è´¦æˆ·:ç”³è¯·å¹¶å¡«å…¥ç™¾åº¦ç¿»è¯‘ AppID, ç¿»è¯‘å¯†é’¥:ç”³è¯·å¹¶å¡«å…¥ç™¾åº¦ç¿»è¯‘å¯†é’¥, Script-Hub:true, Cuttle-Fish:true, Talkatoneæ£€æµ‹:PROXY, Talkatoneåˆ†æµ:PROXY, å•†åº—ä¸‹è½½åŠ é€Ÿ:iosapps, å•†åº—åŠ é€Ÿåœ°å€:iosapps.itunes.apple.com.download.ks-cdn.com, ç³»ç»Ÿå‡çº§åŠ é€Ÿ:updates, å‡çº§åŠ é€Ÿåœ°å€:updates.cdn-apple.com.download.ks-cdn.com, Embyå…ƒæ•°æ®ç­–ç•¥:Proxy, EmbyæœåŠ¡å™¨ç­–ç•¥:Proxy, EmbyæœåŠ¡å™¨åŸŸå1:okemby.org, EmbyæœåŠ¡å™¨åŸŸå2:emby.example.com, EmbyæœåŠ¡å™¨åŸŸå3:media.example.net
#!arguments-desc=ğŸ”˜ Spotifyæ­Œè¯ç¿»è¯‘\n\nÂ· éœ€ç”³è¯·ç™¾åº¦ç¿»è¯‘APIï¼Œæ¨èç”³è¯·é«˜çº§ç‰ˆå¹¶å¼€é€šé€šç”¨æ–‡æœ¬ç¿»è¯‘æœåŠ¡ï¼ŒæˆåŠŸæ‹¿åˆ°IDå¯†é’¥åå¡«å…¥ï¼Œåœ¨è½¯ä»¶æ­Œè¯ç•Œé¢å·¦ä¸‹è§’å³å¯çœ‹åˆ°ç¿»è¯‘æŒ‰é’®ã€‚ç”³è¯·æ—¶å»ºè®®ä½¿ç”¨æ¡Œé¢è®¾å¤‡ï¼Œç§»åŠ¨è®¾å¤‡å¯èƒ½è®¿é—®å¤±è´¥\n\nÂ· æ³¨å†Œåœ°å€ï¼šhttp://api.fanyi.baidu.com\n\nğŸ”˜ Talkatone åˆ†æµç­–ç•¥\n\nÂ· é»˜è®¤é¦–é¡µèŠ‚ç‚¹ï¼Œå¯å¡«å…¥èŠ‚ç‚¹åç§°æˆ–è€…ä»£ç†åˆ†ç»„åç§°æŒ‡å®šç­–ç•¥\n\nğŸ”˜ å•†åº—ä¸‹è½½åŠ é€Ÿå¡«#å¯ç¦ç”¨ï¼ŒåŠ é€Ÿåœ°å€å¯é€‰å¡«å…¶ä»–\n\nÂ· é»˜è®¤é‡‘å±±CDNï¼ŒCDNç»“æœä¸ºæœ¬çœ\n\n   iosapps.itunes.apple.com.download.ks-cdn.com\n\nÂ· å¤‡é€‰ç½‘å®¿CDNï¼ŒCDNç»“æœä¸ºæœ¬çœæˆ–ä¸´è¿‘çœä»½\n\n   hls.itunes.apple.com.mwcname.com\n\nÂ· å¤‡é€‰é˜¿é‡ŒCDNï¼ŒCDNç»“æœå¯èƒ½å¼‚åœ°\n\n   iosapps.itunes.apple.com.m.alikunlun.net\n\nğŸ”˜ ç³»ç»Ÿå‡çº§åŠ é€Ÿå¡«#å¯ç¦ç”¨ï¼ŒåŠ é€Ÿåœ°å€å¯é€‰å¡«å…¶ä»–\n\nÂ· é»˜è®¤é‡‘å±±CDNï¼ŒCDNç»“æœä¸ºæœ¬çœ\n\n   updates.cdn-apple.com.download.ks-cdn.com\n\nÂ· å¤‡é€‰ç½‘å®¿CDNï¼ŒCDNç»“æœä¸ºæœ¬çœæˆ–ä¸´è¿‘çœä»½\n\n   updates.cdn-apple.com.mwcname.com\n\nÂ· å¤‡é€‰é˜¿é‡ŒCDNï¼ŒCDNç»“æœå¯èƒ½å¼‚åœ°\n\n   updates.cdn-apple.com.w.kunlunca.com\n\nğŸ”˜ åˆ†æµç­–ç•¥å¯è‡ªå®šä¹‰ç›´è¿ã€ä»£ç†ã€èŠ‚ç‚¹åç§°ã€ä»£ç†åˆ†ç»„åç§°\n\nğŸ”˜ Embyå…ƒæ•°æ®ç­–ç•¥ï¼šæµ·æŠ¥ã€è¯„åˆ†ã€å­—å¹•ç­‰å…ƒæ•°æ®æœåŠ¡ä½¿ç”¨çš„ç­–ç•¥\n\nğŸ”˜ EmbyæœåŠ¡å™¨ç­–ç•¥ï¼šEmby å®é™…æ’­æ”¾ã€Webã€API ä½¿ç”¨çš„ç­–ç•¥\n\nğŸ”˜ EmbyæœåŠ¡å™¨åŸŸåï¼šå¡«å†™æ‰€éœ€çš„EmbyåŸŸåï¼Œæ¯é¡¹ä»…æ”¯æŒå•ä¸ªåŸŸå
# æ•´ç†ä½œè€…ï¼šLOWERTOP
# ä»“åº“åœ°å€ï¼šhttps://github.com/LOWERTOP/Shadowrocket-First

[General]
force-http-engine-hosts = %APPEND% script.hub, *.script.hub

[Rule]
# Spotify QUIC BLOCK
AND,((DOMAIN-SUFFIX,spotify.com),(PROTOCOL,QUIC)),REJECT-NO-DROP
# BLOCK QUIC
AND,((DOMAIN-SUFFIX,ddgksf2013.top), (PROTOCOL,QUIC)),REJECT-NO-DROP

# è‹¹æœå•†åº—åŠ é€Ÿéœ€è¦ä»¥ä¸‹åœ°å€ç›´è¿
DOMAIN-SUFFIX,apps.apple.com,DIRECT
DOMAIN-SUFFIX,itunes.apple.com,DIRECT

####################################
# Emby æœåŠ¡å™¨è®¿é—®
####################################
DOMAIN-SUFFIX,{{{EmbyæœåŠ¡å™¨åŸŸå1}}},{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,{{{EmbyæœåŠ¡å™¨åŸŸå2}}},{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,{{{EmbyæœåŠ¡å™¨åŸŸå3}}},{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
# å¸¸è§ Emby æœåŠ¡åŸŸå
DOMAIN-SUFFIX,emby.com,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.media,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.wtf,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.plus,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.best,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.moe,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.pro,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.club,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.world,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.vip,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.life,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
DOMAIN-SUFFIX,emby.cool,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}
# æœåŠ¡å™¨å…³é”®è¯å…œåº•
DOMAIN-KEYWORD,emby,{{{EmbyæœåŠ¡å™¨ç­–ç•¥}}}

####################################
# å½±è§†å…ƒæ•°æ® / ä¿¡æ¯æœåŠ¡
####################################
DOMAIN-SUFFIX,allocine.fr,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,themoviedb.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,thetvdb.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,imdb.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,trakt.tv,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,omdbapi.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,fanart.tv,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}

####################################
# åŠ¨æ¼« / éŸ³ä¹å…ƒæ•°æ®
####################################
DOMAIN-SUFFIX,anilist.co,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,musicbrainz.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,audiodb.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}

####################################
# å­—å¹•æœåŠ¡
####################################
DOMAIN-SUFFIX,opensubtitles.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,opensubtitles.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,subscene.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,addic7ed.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,yifysubtitles.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,subdl.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,podnapisi.net,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
# ä¸­æ–‡å­—å¹•
DOMAIN-SUFFIX,assrt.net,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,zimuku.cn,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
# åŠ¨æ¼« / å‰§é›†å­—å¹•
DOMAIN-SUFFIX,kitsunekko.net,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,subsplease.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,subf2m.co,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,subtitles.hr,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,titlovi.com,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,planetdp.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,nyaa.si,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,erai-raws.info,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-SUFFIX,anidb.net,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}

####################################
# Jellyfin å…¼å®¹
####################################
DOMAIN-SUFFIX,jellyfin.org,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}
DOMAIN-KEYWORD,jellyfin,{{{Embyå…ƒæ•°æ®ç­–ç•¥}}}

# çº¢æœçŸ­å‰§éƒ¨åˆ†å»å¹¿å‘Šè§„åˆ™
DOMAIN-WILDCARD,*-misc-lq.fqnovel.com,reject
DOMAIN-WILDCARD,*-reading-ad.qznovelvod.com,reject
DOMAIN-WILDCARD,*-ad-sign.byteimg.com,reject
DOMAIN-WILDCARD,*-iosreadingvideo.qznovelvod.com,reject

# åŒ…å­æ¼«ç”»æ‰€éœ€ç‰¹å®šè§„åˆ™
DOMAIN-SUFFIX,baozimhcn.com,DIRECT
DOMAIN-SUFFIX,baozimh.com,DIRECT
DOMAIN-SUFFIX,baozicdn.com,DIRECT
DOMAIN-SUFFIX,dzmanga.com,DIRECT
DOMAIN-SUFFIX,twmanga.com,DIRECT
DOMAIN-SUFFIX,baozimhapp.com,REJECT

# Talkatone åˆ†æµè§„åˆ™é›†
RULE-SET,https://raw.githubusercontent.com/LOWERTOP/Shadowrocket-First/main/TalkatoneAntiAds.list,reject
DOMAIN-WILDCARD,*-sjc-*.tktn.be, {{{Talkatoneæ£€æµ‹}}}
RULE-SET,https://lowertop.github.io/Shadowrocket-First/TalkatoneProxyOnly.list,{{{Talkatoneåˆ†æµ}}}
RULE-SET,https://lowertop.github.io/Shadowrocket-First/TalkatoneDirect.list,DIRECT

# DeepSeek è§„åˆ™
# ä»¥ä¸‹ä¸ºè¯¥è½¯ä»¶çš„ç–‘ä¼¼ä¸Šä¼ åœ°å€
DOMAIN-SUFFIX,apmplus.volces.com,reject
DOMAIN-SUFFIX,gator.volces.com,reject
DOMAIN-SUFFIX,guh50jw4-ios.mobile-messenger.intercom.com,reject
# ä»¥ä¸‹ä¸ºè¯¥è½¯ä»¶ä»£ç†è§„åˆ™é›†
# RULE-SET,https://lowertop.github.io/Shadowrocket-First/DeepSeek.list,PROXY

[URL Rewrite]
# åŒ…å­æ¼«ç”»æ¨ªå¹…APPå¹¿å‘Š
^https?:\/\/static-tw\.baozimh\.com\/bzmhapp-data\/pics\/install_app_bar_baozimhappx\.jpg$ - reject

# å°èš
^https?://api.xiaoyi.com\/v5\/app\/mobile\/ads - reject
^https?://api.xiaoyi.com\/v5\/app\/config\?userid=.* - reject

[Header Rewrite]
# Spotify if-none-match è¿”å›304çŠ¶æ€ç 
http-request ^https:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com(:443)?)\/user-customization-service\/v1\/customize$ header-del if-none-match

# Pluginhub
http-request ^https://(hub|pluginhub)\.kelee\.one/list\.json header-del if-none-match

[Body Rewrite]
# Pluginhub
http-response ^https://(hub|pluginhub)\.kelee\.one/list\.json "loon://import\?plugin=(https://kelee.one/Tool/Loon/Lpx/(.+).lpx)" "shadowrocket://install?module=http://script.hub/file/_start_/$1/_end_/$2.sgmodule%3Ftype%3Dloon-plugin%26target%3Dshadowrocket-module%26del%3Dtrue%26jqEnabled%3Dtrue"

[Map Local]
# Spotify
# ^https?:\/\/(?:gae2-spclient|guc3-spclient|spclient\.wg)\.spotify\.com\/(?:ad-|pendragon) data-type=text data="" status-code=200

[Script]
# Spotify
spotify-json = type=http-request,pattern=^https:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com(:443)?)\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/,requires-body=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-json.js
spotify-proto = type=http-response,pattern=^https:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com(:443)?)\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js,script-update-interval=0
spotifyæ­Œè¯ç¿»è¯‘ = type=http-response,enable={{{æ­Œè¯ç¿»è¯‘}}},pattern=^https:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-lyric.js,argument=appid={{{ç¿»è¯‘è´¦æˆ·}}}&securityKey={{{ç¿»è¯‘å¯†é’¥}}}

# åŒ…å­æ¼«ç”»ç½‘é¡µ
web-element-block = type=http-response,pattern=^https?:\/\/([a-zA-Z0-9-]+\.)*(baozimhcn|dzmanga)\.com\/.*,requires-body=1,script-path=https://lowertop.github.io/Shadowrocket-First/JS/baozimh.js

# Script Hub
Script Hub: å‰ç«¯ = type=http-request, pattern=^https?:\/\/script\.hub\/($|edit\/|reload), script-path=https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/script-hub.js,enable={{{Script-Hub}}}, timeout=300
Script Hub: é‡å†™è½¬æ¢ = type=http-request, pattern=^https?:\/\/script\.hub\/file\/_start_\/.+type=(?:qx-rewrite|surge-module|loon-plugin|all-module), script-path=https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/Rewrite-Parser.js,enable={{{Script-Hub}}}, timeout=300
Script Hub: è§„åˆ™é›†è½¬æ¢ = type=http-request, pattern=^https?:\/\/script\.hub\/file\/_start_\/.+type=rule-set, script-path=https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/rule-parser.js,enable={{{Script-Hub}}}, timeout=300
Script Hub: è„šæœ¬è½¬æ¢ = type=http-request, pattern=^https?:\/\/script\.hub\/convert\/, script-path=https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/script-converter.js,enable={{{Script-Hub}}}, timeout=300

ç½‘é¡µå˜èº« = type=http-response, pattern=^https?:\/\/ddgksf2013.top\/$,requires-body=1,max-size=-1,script-path=https://ddgksf2013.top/scripts/web.rocket.js,enable={{{Cuttle-Fish}}}, timeout=3500

[Host]
{{{å•†åº—ä¸‹è½½åŠ é€Ÿ}}}.itunes.apple.com = {{{å•†åº—åŠ é€Ÿåœ°å€}}}
{{{ç³»ç»Ÿå‡çº§åŠ é€Ÿ}}}.cdn-apple.com = {{{å‡çº§åŠ é€Ÿåœ°å€}}}
{{{ç³»ç»Ÿå‡çº§åŠ é€Ÿ}}}.cdn-apple.com.akadns.net = {{{å‡çº§åŠ é€Ÿåœ°å€}}}
{{{ç³»ç»Ÿå‡çº§åŠ é€Ÿ}}}.g.aaplimg.com = {{{å‡çº§åŠ é€Ÿåœ°å€}}}

[MITM]
hostname = %APPEND% static-tw.baozimh.com, *.baozimhcn.com, *.dzmanga.com, *.xiaoyi.com, spclient.wg.spotify.com, *spclient.spotify.com, script.hub, *.script.hub, hub.kelee.one, pluginhub.kelee.one, ddgksf2013.top
